From d81902342736fb123855abe5857c67927ecd8ccf Mon Sep 17 00:00:00 2001
From: Radu Bulie <radu-andrei.bulie@nxp.com>
Date: Tue, 16 Sep 2025 23:01:39 +0300
Subject: [PATCH] soc: Add support for a55 and m33s flash images

Signed-off-by: Radu Bulie <radu-andrei.bulie@nxp.com>
---
 iMX94/soc.mak | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/iMX94/soc.mak b/iMX94/soc.mak
index 838d2a2..ec1c42d 100644
--- a/iMX94/soc.mak
+++ b/iMX94/soc.mak
@@ -239,6 +239,13 @@ flash_a55: $(MKIMG) $(AHAB_IMG) $(MCU_IMG) u-boot-atf-container.img $(SPL_A55_IM
 		   -ap $(SPL_A55_IMG) a55 $(SPL_LOAD_ADDR_M33_VIEW) $(V2X_DUMMY) -out flash.bin
 	$(call append_container,u-boot-atf-container.img,1)
 
+flash_a55_m33s: $(MKIMG) $(AHAB_IMG) $(MCU_IMG) $(M33S_IMG) u-boot-atf-container.img $(SPL_A55_IMG) $(OEI_IMG_M33) $(OEI_M33_DDR_IMG)
+	./$(MKIMG) -soc IMX9 -cntr_version 2 -u 1 -append $(AHAB_IMG) -c $(OEI_OPT_M33) -msel $(MSEL) \
+		   -m33 $(MCU_IMG) 0 $(MCU_TCM_ADDR) \
+		   -m33 $(M33S_IMG) 1 $(M33S_TCM_ADDR) $(M33S_TCM_ADDR_ALIAS) \
+		   -ap $(SPL_A55_IMG) a55 $(SPL_LOAD_ADDR_M33_VIEW) $(V2X_DUMMY) -out flash.bin
+	$(call append_container,u-boot-atf-container.img,1)
+
 flash_a55_xspi: $(MKIMG) $(AHAB_IMG) $(MCU_IMG) fcb.bin u-boot-atf-container.img $(SPL_A55_IMG) $(OEI_IMG_M33) $(OEI_M33_DDR_IMG)
 	./$(MKIMG) -soc IMX9 -cntr_version 2 -u 1 -append $(AHAB_IMG) -c $(OEI_OPT_M33) -msel $(MSEL) \
 		   -m33 $(MCU_IMG) 0 $(MCU_TCM_ADDR) \
-- 
2.34.1

